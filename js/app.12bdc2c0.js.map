{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/App.vue?68ab","webpack:///./src/components/WebMap.vue?b22a","webpack:///./src/assets/getMeteofunction.js","webpack:///./src/assets/graph_d3Function.js","webpack:///./src/assets/IWLSServiceFunctions.js","webpack:///src/components/WebMap.vue","webpack:///./src/components/WebMap.vue?224d","webpack:///./src/components/WebMap.vue","webpack:///src/App.vue","webpack:///./src/App.vue?1160","webpack:///./src/App.vue?bff9","webpack:///./src/main.js","webpack:///./src/App.vue?c650"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","_vm","this","_h","$createElement","_c","_self","attrs","_m","staticRenderFns","_v","$","jQuery","hideMeteoElement","dateNow","dateChosen","document","getElementById","style","display","getMeteo","id","zone","x","XMLHttpRequest","open","onreadystatechange","readyState","status","doc","responseText","parser","DOMParser","xmlDoc","parseFromString","removeWarning","remove","removeText","innerHTML","getElementsByTagName","warningTag","getAttribute","textWarning","createElement","setAttribute","first","insertAdjacentElement","button","onclick","regularForecast","wind","periodCovRegFor","conditions","waveForecast","weatherConditionWavFor","waves","periodCovWavFor","extendedForecast","weatherConditionExtFor","forecastPeriod","insertAdjacentHTML","send","graph","element","timeNow","timeSlider","parseTime","d3","date","eventDate","minValue","maxValue","width","height","margin","top","bottom","left","right","svg","append","attr","domain","range","y","line","todayLine","yvalue","line2","xAxisPosition","format","ticks","tickFormat","selectAll","focus","focusText","findDateRelated","event","x0","invert","selectedData","clicked","defaultPrevented","dateClicked","Date","values","mouseover","on","mousemove","mouseout","map","a","html","getStationsInfo","stations","ajax","url","type","async","contentType","success","json","date2string","year","month","day","hour","minute","getDateValuesFromDate","String","getUTCFullYear","getUTCMonth","padStart","getUTCDate","getUTCHours","getUTCMinutes","getStationAttributes","stationAttributes","prediction","timeStart","dateMin","timeEndPrediction","dateMax","color","lastDate","lastWlo","console","log","lastDateWlp","lastWlp","predictions","dateRoundedArrayHours","startDateDate","endDateDate","listDate","startDate","toISOString","endDate","dateMove","strDate","setTime","getTime","setHours","getHours","Math","round","getMinutes","setMinutes","getTimeAvailable","layerName","split","nearestTimeToShow","time","coeff","rounded","dateUTCClicked","timeInterval","mounted","beforeDestroy","view","destroy","component","components","Vue","config","productionTip","errors","observable","set","render","h","App","watch","$errors","$mount"],"mappings":"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","file":"js/app.12bdc2c0.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/navigation-proto/\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[_c('web-map',{attrs:{\"id\":\"viewDiv\"}}),_c('div',{attrs:{\"id\":\"layerlist\"}}),_vm._m(0),_vm._m(1)],1)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"panel\"}},[_c('div',{attrs:{\"id\":\"region\"}},[_vm._v(\" Prévisions météo maritime - veuillez cliquer sur une région \")]),_c('div',{attrs:{\"id\":\"emis\"}}),_c('table',{attrs:{\"id\":\"headerVent\"}}),_c('div',{attrs:{\"id\":\"vent\"}}),_c('table',{attrs:{\"id\":\"headerVagues\"}}),_c('div',{attrs:{\"id\":\"vagues\"}}),_c('table',{attrs:{\"id\":\"headerConditions\"}}),_c('div',{attrs:{\"id\":\"conditions\"}}),_c('table',{attrs:{\"id\":\"longTerme\"}}),_c('div',{attrs:{\"id\":\"emisExtent\"}})])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"sliderContainer\"}},[_c('div',{attrs:{\"id\":\"titleDate\"}}),_c('div',{attrs:{\"id\":\"slider\"}})])}]\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div')}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import jQuery from \"jquery\";\r\nconst $ = jQuery;\r\nwindow.$ = $;\r\n\r\nfunction hideMeteoElement(dateNow, dateChosen) {\r\n    if (dateNow - dateChosen <= 0) {\r\n        document.getElementById(\"panel\").style.display = \"block\";\r\n    } else {\r\n        document.getElementById(\"panel\").style.display = \"none\";\r\n    }\r\n}\r\n\r\nfunction getMeteo(id) {\r\n    var zone\r\n    if (id === \"test_create_shp.1\") {\r\n        zone = \"m0000198_f\"\r\n    } else {\r\n        zone = \"m0000199_f\"\r\n    }\r\n\r\n\r\n\r\n\r\n    var x = new XMLHttpRequest();\r\n    x.open(\"GET\", \"https://cors-anywhere.herokuapp.com/https://dd.meteo.gc.ca/marine_weather/xml/st_lawrence/\" + zone + \".xml\", true); //Is this a good way to fix CORS error?\r\n    x.onreadystatechange = function() {\r\n        if (x.readyState == 4 && x.status == 200) {\r\n            var doc = x.responseText;\r\n            //console.log(doc)\r\n\r\n            var parser = new DOMParser(),\r\n                xmlDoc = parser.parseFromString(doc, \"text/xml\")\r\n\r\n            //.log(xmlDoc)\r\n            var removeWarning = document.getElementById(\"buttonWarning\");\r\n            if (removeWarning) {\r\n                removeWarning.remove();\r\n            }\r\n            var removeText = document.getElementById(\"textWarning\");\r\n            if (removeText) {\r\n                removeText.remove();\r\n            }\r\n            document.getElementById(\"region\").innerHTML = xmlDoc.getElementsByTagName('area')[0].innerHTML\r\n            if (!(xmlDoc.getElementsByTagName('warnings').length === 0)) {\r\n                if (xmlDoc.getElementsByTagName('warnings')[0].innerHTML === null) {\r\n                    //console.log(xmlDoc.getElementsByTagName('warnings')[0].innerHTML)\r\n                    var warningTag = xmlDoc.getElementsByTagName('warnings')[0]\r\n                    if (warningTag.getElementsByTagName('event')[0].getAttribute(\"status\") === \"EN VIGUEUR\") {\r\n\r\n                        //insert warning message before headerVent\r\n                        var textWarning = document.createElement(\"div\")\r\n                        textWarning.setAttribute('id', \"textWarning\")\r\n                        textWarning.innerHTML = warningTag.getElementsByTagName('event')[0].getAttribute(\"name\") + \" en vigueur pour cette région. Pour plus de détails, veuillez consulter <a href=https://meteo.gc.ca/marine/region_f.html?mapID=12 target='_blank'>météo maritime Canada</a>.\"\r\n                        textWarning.style.display = \"none\"\r\n\r\n                        var first = document.getElementById('headerVent');\r\n                        first.insertAdjacentElement('beforebegin', textWarning);\r\n\r\n                        var button = document.createElement('BUTTON');\r\n                        button.innerHTML = \"Avertissement\"\r\n                        button.setAttribute(\"id\", \"buttonWarning\");\r\n                        button.onclick = function() {\r\n                            var x = document.getElementById(\"textWarning\");\r\n                            if (x.style.display === \"none\") {\r\n                                x.style.display = \"block\";\r\n                            } else {\r\n                                x.style.display = \"none\";\r\n                            }\r\n                        }\r\n\r\n                        textWarning.insertAdjacentElement('beforebegin', button);\r\n                    }\r\n                }\r\n\r\n\r\n\r\n            }\r\n\r\n            var regularForecast = xmlDoc.getElementsByTagName('regularForecast')[0]\r\n            if (regularForecast) {\r\n                document.getElementById(\"emis\").innerHTML = \"Prévisions émises le \" + regularForecast.getElementsByTagName('textSummary')[1].innerHTML\r\n\r\n                var wind = regularForecast.getElementsByTagName('wind')[0]\r\n                var periodCovRegFor = regularForecast.getElementsByTagName('periodOfCoverage')[0]\r\n                if (wind) {\r\n                    document.getElementById(\"headerVent\").innerHTML = \"<tr><td id=header>Vent</td><td id=periode>pour \" + periodCovRegFor.innerHTML + \"</td></tr>\"\r\n                    document.getElementById(\"vent\").innerHTML = wind.innerHTML\r\n                }\r\n                var conditions = regularForecast.getElementsByTagName('weatherVisibility')[0]\r\n                if (conditions) {\r\n                    document.getElementById(\"headerConditions\").innerHTML = \"<tr><td id=header>Conditions et visibilité</td><td id=periode>pour \" + periodCovRegFor.innerHTML + \"</td></tr>\"\r\n                    document.getElementById(\"conditions\").innerHTML = conditions.innerHTML\r\n                }\r\n            }\r\n            var waveForecast = xmlDoc.getElementsByTagName('waveForecast')[0]\r\n            if (waveForecast) {\r\n                var weatherConditionWavFor = waveForecast.getElementsByTagName('weatherCondition')[0]\r\n                var waves = weatherConditionWavFor.getElementsByTagName('textSummary')[0]\r\n                var periodCovWavFor = regularForecast.getElementsByTagName('periodOfCoverage')[0]\r\n                    //console.log(waves)\r\n                if (waves) {\r\n                    document.getElementById(\"headerVagues\").innerHTML = \"<tr><td id=header>Vagues</td><td id=periode>pour \" + periodCovWavFor.innerHTML + \"</td></tr>\"\r\n                    document.getElementById(\"vagues\").innerHTML = waves.innerHTML\r\n                }\r\n            }\r\n\r\n\r\n\r\n            document.getElementById(\"longTerme\").innerHTML = \"<tr><th colspan='2'>Prévisions long terme</th></tr>\"\r\n            var extendedForecast = xmlDoc.getElementsByTagName('extendedForecast')[0]\r\n            if (extendedForecast) {\r\n\r\n                var weatherConditionExtFor = extendedForecast.getElementsByTagName('weatherCondition')[0]\r\n                var forecastPeriod = weatherConditionExtFor.getElementsByTagName('forecastPeriod')\r\n                for (var i = 0; i < forecastPeriod.length; i++) {\r\n                    document.getElementById(\"longTerme\").insertAdjacentHTML('beforeend', \"<tr><td>\" + forecastPeriod[i].getAttribute(\"name\") + \"</td><td>\" + forecastPeriod[i].innerHTML + \"</td></tr>\")\r\n                }\r\n            } else {\r\n                document.getElementById(\"longTerme\").insertAdjacentHTML('beforeend', \"<tr><td>Prévisions long terme non disponibles pour le moment</td></tr>\")\r\n            }\r\n            document.getElementById(\"emisExtent\").innerHTML = \"Prévisions long terme émises le \" + extendedForecast.getElementsByTagName('textSummary')[1].innerHTML\r\n        }\r\n    };\r\n    x.send(null);\r\n}\r\n\r\n\r\n\r\nexport { getMeteo, hideMeteoElement }","import * as d3 from \"d3\";\r\n\r\n\r\nfunction graph(data, element, timeNow, timeSlider) {\r\n\r\n    var parseTime = d3.timeParse(\"%Y-%m-%dT%H:%M:00Z\");\r\n\r\n    for (let i = 0; i < data.length; i++) {\r\n        data[i].date = parseTime(data[i].eventDate);\r\n    }\r\n    var minValue = d3.min(data, (d) => d.value);\r\n    var maxValue = d3.max(data, (d) => d.value);\r\n\r\n    const width = 200;\r\n    const height = 150;\r\n    const margin = { top: 10, bottom: 35, left: 15, right: 10 };\r\n\r\n    const svg = d3\r\n        .select(element)\r\n        .append(\"svg\")\r\n        .attr(\"height\", height)\r\n        .attr(\"width\", width);\r\n\r\n    const x = d3\r\n        .scaleTime()\r\n        .domain(d3.extent(data, (d) => d.date))\r\n        .range([margin.left, width - margin.right]);\r\n    //.padding(0.1)\r\n\r\n    const y = d3\r\n        .scaleLinear()\r\n        .domain(d3.extent(data, (d) => d.value))\r\n        .range([height - margin.bottom, margin.top]);\r\n\r\n    svg.append(\"g\");\r\n    //.attr('transform', 'translate(50,-50)')\r\n\r\n    var line = d3\r\n        .line()\r\n        .x(function(d) {\r\n            return x(d.date);\r\n        })\r\n        .y(function(d) {\r\n            return y(d.value);\r\n        });\r\n\r\n    svg\r\n        .append(\"path\")\r\n        .data([data])\r\n        .attr(\"class\", \"line\")\r\n        .attr(\"d\", line)\r\n        .style(\"stroke-width\", 2)\r\n        .style(\"stroke\", \"blue\")\r\n        .style(\"fill\", \"none\");\r\n\r\n    //var date = new Date\r\n    //console.log(date)\r\n    var date = parseTime(timeNow);\r\n    //console.log(date);\r\n\r\n    var todayLine = [{\r\n            date: date,\r\n            yvalue: minValue,\r\n        },\r\n        {\r\n            date: date,\r\n            yvalue: maxValue,\r\n        },\r\n    ];\r\n\r\n    var line2 = d3\r\n        .line()\r\n        .x(function(d) {\r\n            return x(d.date);\r\n        })\r\n        .y(function(d) {\r\n            return y(d.yvalue);\r\n        });\r\n\r\n    //console.log(todayLine);\r\n\r\n    svg\r\n        .append(\"path\")\r\n        .data([todayLine])\r\n        .attr(\"class\", \"line\")\r\n        .attr(\"d\", line2)\r\n        .style(\"stroke-width\", 2)\r\n        .style(\"stroke\", \"red\")\r\n        .style(\"fill\", \"none\");\r\n\r\n    const xAxisPosition = height - margin.bottom;\r\n    const format = d3.timeFormat(\"%d/%m %H:%M\");\r\n\r\n    svg\r\n        .append(\"g\")\r\n        .attr(\"class\", \"axis\")\r\n        .attr(\"transform\", \"translate(0,\" + xAxisPosition + \")\")\r\n        .call(d3.axisBottom(x).ticks(10).tickFormat(format))\r\n        .selectAll(\"text\")\r\n        .style(\"text-anchor\", \"end\")\r\n        .attr(\"dx\", \"-.8em\")\r\n        .attr(\"dy\", \".15em\")\r\n        .attr(\"transform\", \"rotate(-65)\")\r\n        .style(\"font-size\", 10);\r\n\r\n    svg\r\n        .append(\"g\")\r\n        .attr(\"class\", \"y axis\")\r\n        .attr(\"transform\", \"translate(\" + margin.left + \",0)\")\r\n        .call(d3.axisLeft(y).ticks(6));\r\n\r\n    // This allows to find the closest X index of the mouse:\r\n    //var bisect = d3.bisector(function (d) {\r\n    //  return d.x;\r\n    //}).left;\r\n\r\n    // Create the circle that travels along the curve of chart\r\n    var focus = svg\r\n        .append(\"g\")\r\n        .append(\"circle\")\r\n        .style(\"fill\", \"none\")\r\n        .attr(\"stroke\", \"black\")\r\n        .attr(\"r\", 8.5)\r\n        .style(\"opacity\", 0);\r\n\r\n    // Create the text that travels along the curve of chart\r\n    var focusText = svg\r\n        .append(\"g\")\r\n        .append(\"text\")\r\n        .style(\"opacity\", 0)\r\n        .attr(\"text-anchor\", \"left\")\r\n        .attr(\"alignment-baseline\", \"middle\");\r\n\r\n    // Create a rect on top of the svg area: this rectangle recovers mouse position\r\n    svg\r\n        .append(\"rect\")\r\n        .style(\"fill\", \"none\")\r\n        .style(\"pointer-events\", \"all\")\r\n        .attr(\"width\", width)\r\n        .attr(\"height\", height)\r\n        .on(\"mouseover\", mouseover)\r\n        .on(\"mousemove\", mousemove)\r\n        .on(\"mouseout\", mouseout)\r\n        .on(\"click\", clicked);\r\n\r\n    function findDateRelated(event) {\r\n        //console.log(\"mous\", event.pageX)\r\n        var x0 = x.invert(d3.pointer(event)[0]);\r\n        //console.log(\"mous\", x0)\r\n        var i = d3.bisect(result, x0);\r\n        selectedData = data[i]\r\n        return selectedData\r\n    }\r\n\r\n\r\n\r\n    function clicked() {\r\n        if (event.defaultPrevented) return;\r\n\r\n        //timeClick.title = findDateRelated(event).eventDate\r\n        var dateClicked = new Date(findDateRelated(event).eventDate)\r\n        timeSlider.values = [dateClicked]\r\n\r\n\r\n\r\n\r\n    }\r\n    // What happens when the mouse move -> show the annotations at the right positions.\r\n    function mouseover() {\r\n        focus.style(\"opacity\", 1);\r\n        focusText.style(\"opacity\", 1);\r\n    }\r\n\r\n    let result = data.map((a) => a.date);\r\n    //console.log(result);\r\n    var selectedData\r\n\r\n    function mousemove() {\r\n        var x0 = x.invert(d3.pointer(event)[0]);\r\n\r\n        var i = d3.bisect(result, x0);\r\n\r\n        selectedData = data[i];\r\n        //console.log(selectedData);\r\n        focus\r\n            .attr(\"cx\", x(selectedData.date))\r\n            .attr(\"cy\", y(selectedData.value));\r\n        focusText\r\n            .html(selectedData.value)\r\n            .attr(\"x\", x(selectedData.date) + 15)\r\n            .attr(\"y\", y(selectedData.value))\r\n            .style(\"stroke\", \"black\");\r\n    }\r\n\r\n    function mouseout() {\r\n        focus.style(\"opacity\", 0);\r\n        focusText.style(\"opacity\", 0);\r\n    }\r\n}\r\nexport default graph","import jQuery from \"jquery\";\r\nconst $ = jQuery;\r\nwindow.$ = $;\r\n\r\n\r\n\r\nfunction getStationsInfo() {\r\n    var stations\r\n    $.ajax({\r\n        // TODO: fix CORS Error — and How the Access-Control-Allow-Origin Header\r\n        url: \"https://api.iwls.azure.cloud.dfo-mpo.gc.ca/api/v1/stations\",\r\n        type: \"GET\",\r\n        async: false,\r\n        contentType: \"application/json; charset=utf-8\",\r\n        success: function(json) {\r\n            stations = json;\r\n        },\r\n    });\r\n    return stations\r\n}\r\n\r\nfunction date2string(year, month, day, hour, minute) {\r\n    return year + \"-\" + month + \"-\" + day + \"T\" + hour + \":\" + minute + \":00Z\";\r\n}\r\n\r\nfunction getDateValuesFromDate(date) {\r\n    var year = String(date.getUTCFullYear());\r\n    var month = String(date.getUTCMonth() + 1).padStart(2, \"0\");\r\n    var day = String(date.getUTCDate()).padStart(2, \"0\");\r\n    var hour = String(date.getUTCHours()).padStart(2, \"0\");\r\n    var minute = String(date.getUTCMinutes()).padStart(2, \"0\");\r\n    return date2string(year, month, day, hour, minute)\r\n}\r\n\r\nfunction getStationAttributes(date, stationAttributes) {\r\n\r\n    var timeStart = getDateValuesFromDate(date.dateMin)\r\n    var timeNow = getDateValuesFromDate(date.dateNow)\r\n    var timeEndPrediction = getDateValuesFromDate(date.dateMax)\r\n        // Get last observation if possible\r\n    if (stationAttributes.color === \"wlo\") {\r\n        var data;\r\n        $.ajax({\r\n            // TODO: fix CORS Error — and How the Access-Control-Allow-Origin Header\r\n            url: \"https://api.iwls.azure.cloud.dfo-mpo.gc.ca/api/v1/stations/\" +\r\n                stationAttributes.id +\r\n                \"/data?time-series-code=wlo&from=\" +\r\n                timeStart +\r\n                \"&to=\" +\r\n                timeNow +\r\n                \"\",\r\n            type: \"GET\",\r\n            async: false,\r\n            contentType: \"application/json; charset=utf-8\",\r\n            success: function(json) {\r\n                data = json;\r\n            },\r\n        });\r\n\r\n        stationAttributes.lastDate = data[data.length - 1][\"eventDate\"];\r\n        stationAttributes.lastWlo = data[data.length - 1][\"value\"];\r\n    }\r\n\r\n    // Get last prediction\r\n    var prediction;\r\n    $.ajax({\r\n        // TODO: fix CORS Error — and How the Access-Control-Allow-Origin Header\r\n        url: \"https://api.iwls.azure.cloud.dfo-mpo.gc.ca/api/v1/stations/\" +\r\n            stationAttributes.id +\r\n            \"/data?time-series-code=wlp&from=\" +\r\n            timeStart +\r\n            \"&to=\" +\r\n            timeEndPrediction +\r\n            \"\",\r\n        type: \"GET\",\r\n        async: false,\r\n        contentType: \"application/json; charset=utf-8\",\r\n        success: function(json) {\r\n            prediction = json;\r\n        },\r\n    });\r\n    console.log(\"predictions\", prediction)\r\n    stationAttributes.lastDateWlp =\r\n        prediction[prediction.length - 1][\"eventDate\"];\r\n    stationAttributes.lastWlp =\r\n        prediction[prediction.length - 1][\"value\"];\r\n    stationAttributes.predictions = prediction;\r\n    stationAttributes.timeNow = timeNow;\r\n    //console.log(\"predictions\", stationAttributes.timeNow);\r\n}\r\n\r\nfunction dateRoundedArrayHours(startDateDate, endDateDate) {\r\n    var listDate = [];\r\n    var startDate = startDateDate.toISOString().slice(0, 19) + \"Z\";\r\n    var endDate = endDateDate.toISOString().slice(0, 19) + \"Z\";\r\n    var dateMove = new Date(startDate);\r\n    var strDate = startDate;\r\n    while (strDate < endDate) {\r\n        strDate = dateMove.toISOString().slice(0, 19) + \"Z\";\r\n        //strDate = roundMinutes(dateMove);\r\n        listDate.push(strDate);\r\n\r\n        dateMove.setTime(dateMove.getTime() + 60 * 60 * 1000)\r\n    }\r\n\r\n    /*function roundMinutes(date) {\r\n\r\n        date.setHours(date.getHours() + Math.round(date.getMinutes() / 60));\r\n        date.setMinutes(0, 0, 0); // Resets also seconds and milliseconds\r\n\r\n        return date;\r\n    }*/\r\n    for (let i = 0; i < listDate.length; i++) {\r\n        listDate[i] = new Date(listDate[i])\r\n        listDate[i].setHours(listDate[i].getHours() + Math.round(listDate[i].getMinutes() / 60));\r\n        listDate[i].setMinutes(0, 0, 0); // Resets also seconds and milliseconds\r\n    }\r\n    return listDate\r\n}\r\n\r\nfunction getTimeAvailable(layerName) {\r\n    var get = [];\r\n    $.ajax({ // TODO: fix CORS Error — and How the Access-Control-Allow-Origin Header\r\n        url: \"https://geo.weather.gc.ca/geomet?lang=fr&service=WMS&version=1.3.0&request=GetCapabilities&layer=\" + layerName,\r\n        type: \"GET\",\r\n        async: false,\r\n        contentType: 'application/json; charset=utf-8',\r\n        success: function(json) {\r\n            get = json;\r\n        }\r\n    });\r\n    //console.log(\"station\", get)\r\n    return get.getElementsByTagName('Dimension')[0].innerHTML.split(\"/\")\r\n        //var startTime = timeExtent[0]\r\n        //var EndTime = timeExtent[1]\r\n}\r\n\r\nfunction nearestTimeToShow(time, layerName) {\r\n    var coeff;\r\n    var rounded;\r\n    var dateUTCClicked;\r\n    var timeInterval = getTimeAvailable(layerName)[2];\r\n    if (timeInterval === \"PT10M\") {\r\n        coeff = 1000 * 60 * 10;\r\n        rounded = new Date(\r\n            Math.round(time.getTime() / coeff) * coeff\r\n        );\r\n\r\n        dateUTCClicked = getDateValuesFromDate(rounded);\r\n    } else if (timeInterval === \"PT1H\") {\r\n        coeff = 1000 * 60 * 60;\r\n        rounded = new Date(\r\n            Math.round(time.getTime() / coeff) * coeff\r\n        );\r\n\r\n        dateUTCClicked = getDateValuesFromDate(rounded);\r\n\r\n    } else if (timeInterval === \"PT3H\") {\r\n        coeff = 1000 * 60 * 60 * 3;\r\n        rounded = new Date(\r\n            Math.round(time.getTime() / coeff) * coeff\r\n        );\r\n\r\n        dateUTCClicked = getDateValuesFromDate(rounded);\r\n    }\r\n    return dateUTCClicked\r\n}\r\n\r\n\r\n\r\n\r\nexport { getStationAttributes, getStationsInfo, getDateValuesFromDate, dateRoundedArrayHours, nearestTimeToShow, getTimeAvailable }","<template>\r\n  <div></div>\r\n</template>\r\n\r\n<script>\r\nimport { loadModules } from \"esri-loader\";\r\nimport { getMeteo, hideMeteoElement } from \"../assets/getMeteofunction\";\r\nimport graph from \"../assets/graph_d3Function\";\r\nimport dataJSON from \"../static/layers.json\";\r\nimport {\r\n  getStationAttributes,\r\n  getStationsInfo,\r\n  dateRoundedArrayHours,\r\n  nearestTimeToShow,\r\n  getTimeAvailable,\r\n} from \"../assets/IWLSServiceFunctions\";\r\n\r\nexport default {\r\n  name: \"web-map\",\r\n  mounted() {\r\n    loadModules(\r\n      [\r\n        \"esri/Map\",\r\n        \"esri/views/MapView\",\r\n        \"esri/layers/OGCFeatureLayer\",\r\n        \"esri/Graphic\",\r\n        \"esri/layers/GraphicsLayer\",\r\n        \"esri/geometry/Point\",\r\n        \"esri/popup/content/CustomContent\",\r\n        \"esri/layers/WMSLayer\",\r\n        \"esri/widgets/LayerList\",\r\n        \"esri/layers/GroupLayer\",\r\n        \"esri/core/watchUtils\",\r\n        \"esri/widgets/TimeSlider\",\r\n      ],\r\n      { css: true }\r\n    ).then(\r\n      ([\r\n        ArcGISMap,\r\n        MapView,\r\n        OGCFeatureLayer,\r\n        Graphic,\r\n        GraphicsLayer,\r\n        Point,\r\n        CustomContent,\r\n        WMSLayer,\r\n        LayerList,\r\n        GroupLayer,\r\n        watchUtils,\r\n        TimeSlider,\r\n      ]) => {\r\n        /* initialize date variable:\r\n         */\r\n\r\n        function getCurrentDate() {\r\n          this.dateNow = new Date();\r\n          this.dateChosen = new Date();\r\n\r\n          this.dateMin = new Date();\r\n          this.dateMin.setHours(this.dateMin.getHours() - 6);\r\n\r\n          this.dateMax = new Date();\r\n          this.dateMax.setHours(this.dateMax.getHours() + 6);\r\n\r\n          this.datesArrayHours = dateRoundedArrayHours(\r\n            this.dateMin,\r\n            this.dateMax\r\n          );\r\n        }\r\n\r\n        var date = new getCurrentDate();\r\n\r\n        //Set what is happening if the variable date is changed by using a proxy\r\n        var timeChangeProxy = new Proxy(date, {\r\n          set: function (target, property, value) {\r\n            var dateChosen = value;\r\n\r\n\r\n            // To erase what it is said about the group of the previous time. \r\n            console.log(\"layerList.visibleItems\", layerList.visibleItems)\r\n            for (let i = 0; i< layerList.visibleItems.items.length; i++) {\r\n              if (layerList.visibleItems.items[i].layer.type === \"group\") {\r\n                layerList.visibleItems.items[i].panel = {}\r\n              }\r\n            }\r\n\r\n           \r\n\r\n            var wmsLayers = map.allLayers.filter(function (layer) {\r\n              return layer.type === \"wms\";\r\n            });\r\n\r\n            for (let i = 0; i < wmsLayers.items.length; i++) {\r\n              var parent = wmsLayers.items[i].parent;\r\n\r\n              parent.remove(wmsLayers.items[i]);\r\n            }\r\n\r\n            for (let i = 0; i < groupArray.length; i++) {\r\n              if (groupArray[i].visible) {\r\n                for (let j = 0; j < dataJSON.layers.length; j++) {\r\n                  if (\r\n                    dataJSON.layers[j].groupeParentName === groupArray[i].name\r\n                  ) {\r\n                    var dateUTCClicked = nearestTimeToShow(\r\n                      value,\r\n                      dataJSON.layers[j].name\r\n                    );\r\n\r\n                    var layer_wms = new WMSLayer({\r\n                      url: dataJSON.layers[j].url,\r\n                      title: dataJSON.layers[j].title.fr,\r\n                      name: dataJSON.layers[j].name,\r\n                      listMode: \"hide-children\",\r\n                      visible: visibleLayers[dataJSON.layers[j].name],\r\n                      infoLegende: dataJSON.layers[j].infoLegende,\r\n                      opacity: dataJSON.layers[j].opacity,\r\n                      customParameters: { time: dateUTCClicked }, // Permet de costumizer les paramètres requis par le service utilisé\r\n                    });\r\n\r\n                    groupArray[i].add(layer_wms);\r\n\r\n                    var timeAvailable = getTimeAvailable(\r\n                      dataJSON.layers[j].name\r\n                    );\r\n\r\n                    if (\r\n                      dateUTCClicked < timeAvailable[0] ||\r\n                      dateUTCClicked > timeAvailable[1]\r\n                    ) {\r\n                      groupArray[i].remove(layer_wms);\r\n                    }\r\n\r\n                    console.log(\"layerView\", thisView.whenLayerView(layer_wms)); // TODO Find out why when I have this line, the layers erase themselves properly when I am out of range, but it doesnt when I dont add this line\r\n\r\n                    setTimeout(function () {\r\n                      updateGroupLayerList(groupArray[i].title);\r\n                    }, 1); // doit être retardé à cause de la asynchornicité !\r\n                  }\r\n                }\r\n              }\r\n            }\r\n\r\n            //hide meteomaritime if in the past\r\n            hideMeteoElement(timeChangeProxy.dateNow, dateChosen);\r\n\r\n            // change date showed on the slider\r\n            document.getElementById(\"titleDate\").innerHTML = value;\r\n\r\n            target[property] = value;\r\n            return true;\r\n          },\r\n        });\r\n\r\n        /**/\r\n\r\n        const map = new ArcGISMap({\r\n          basemap: \"topo-vector\",\r\n        });\r\n\r\n        this.view = new MapView({\r\n          container: this.$el,\r\n          map: map,\r\n          center: [-68.805, 47.027], // longitude, latitude\r\n          zoom: 7,\r\n        });\r\n\r\n        // Set up a way to store the visible attribute of every layers, so that it keeps the same value when changing time\r\n        var visibleLayers = {};\r\n\r\n        //creates an array that will store all the layers of the map\r\n        var currentLayersProxy = new Proxy([], {\r\n          set: function (target, property, value) {\r\n            //watch the visible property of all layers in the array. If changed, update the visibleLayers.\r\n            for (let i = 0; i < currentLayersProxy.length; i++) {\r\n              watchUtils.watch(\r\n                currentLayersProxy[i],\r\n                \"visible\",\r\n                function (visible) {\r\n                  visibleLayers[currentLayersProxy[i].name] = visible;\r\n                }\r\n              );\r\n            }\r\n            target[property] = value;\r\n            return true;\r\n          },\r\n        });\r\n\r\n        // Watch for changes in layers of the map. If there is one, change the proxy and new layers to visibleLayers, but do not\r\n        // the value of the visible property of the layers already listed in visibleLayers.\r\n        map.allLayers.on(\"change\", function (event) {\r\n          currentLayersProxy.length = 0;\r\n          for (let i = 0; i < event.target.items.length; i++) {\r\n            if (event.target.items[i].name) {\r\n              currentLayersProxy.push(event.target.items[i]);\r\n              var propertyName = event.target.items[i].name;\r\n              if (!(event.target.items[i].name in visibleLayers)) {\r\n                visibleLayers[propertyName] = event.target.items[i].visible;\r\n              }\r\n            }\r\n          }\r\n        });\r\n\r\n        //load stations info:\r\n        var stations = getStationsInfo();\r\n\r\n        // load the groups displayed in the layerlist (from layers.json)\r\n        var groupArray = getGroups(dataJSON.groupes);\r\n\r\n        function getGroups(groups) {\r\n          var groupsArray = [];\r\n          for (let i = 0; i < groups.length; i++) {\r\n            var group = new GroupLayer({\r\n              title: groups[i].title.fr,\r\n              layers: [],\r\n              visible: false,\r\n              name: groups[i].name,\r\n            });\r\n            groupsArray.push(group);\r\n            map.add(group);\r\n          }\r\n          return groupsArray;\r\n        }\r\n\r\n        //load wfs layers (from layers.json)\r\n        for (let j = 0; j < dataJSON.layers.length; j++) {\r\n          if (dataJSON.layers[j].type === \"wfs\") {\r\n            var layer_wfs = new OGCFeatureLayer({\r\n              url: dataJSON.layers[j].url,\r\n              collectionId: dataJSON.layers[j].collectionId,\r\n              popupEnabled: true,\r\n              name: dataJSON.layers[j].name,\r\n              visible: true,\r\n              title: dataJSON.layers[j].title.fr,\r\n              listMode: \"hide\",\r\n              renderer: dataJSON.layers[j].renderer,\r\n            });\r\n            map.add(layer_wfs);\r\n          }\r\n        }\r\n\r\n        // Sometimes, using this.view doesnt work, so use thisView instead.\r\n        var thisView = this.view;\r\n\r\n        // Loads the WMS layers  (from layers.json) once it is clicked as visible in the layerlist\r\n        for (let i = 0; i < groupArray.length; i++) {\r\n          watchUtils.watch(groupArray[i], \"visible\", function (visible) {\r\n            if (visible) {\r\n              for (let j = 0; j < dataJSON.layers.length; j++) {\r\n                var foundLayersRadar = map.allLayers.find(function (layer) {\r\n                  return layer.name === dataJSON.layers[j].name;\r\n                });\r\n                if (\r\n                  dataJSON.layers[j].type === \"wms\" &&\r\n                  dataJSON.layers[j].groupeParentName === groupArray[i].name\r\n                ) {\r\n                  if (foundLayersRadar === undefined) {\r\n                    var dateToShow = nearestTimeToShow(\r\n                      date.dateChosen,\r\n                      dataJSON.layers[j].name\r\n                    );\r\n                    var layer_wms = new WMSLayer({\r\n                      url: dataJSON.layers[j].url,\r\n                      customParameters: {\r\n                        time: dateToShow, // retrieve the current observation\r\n                      },\r\n                      title: dataJSON.layers[j].title.fr,\r\n                      name: dataJSON.layers[j].name,\r\n                      listMode: \"hide-children\",\r\n                      visible: dataJSON.layers[j].visibleLayer,\r\n                      infoLegende: dataJSON.layers[j].infoLegende,\r\n                      opacity: dataJSON.layers[j].opacity,\r\n                    });\r\n\r\n                    groupArray[i].add(layer_wms);\r\n\r\n                    var timeAvailable = getTimeAvailable(\r\n                      dataJSON.layers[j].name\r\n                    );\r\n\r\n                    // Supprime la couche si le temps n'est pas dans les bornes. Ridicule d'ajouter puis ensuite supprimer, mais il semble que ce soit la seule facon que ca fonctionne correctement (pour l'instant)!\r\n                    if (\r\n                      dateToShow < timeAvailable[0] ||\r\n                      dateToShow > timeAvailable[1]\r\n                    ) {\r\n                      groupArray[i].remove(layer_wms);\r\n                    }\r\n\r\n                    setTimeout(function () {\r\n                      updateGroupLayerList(groupArray[i].title);\r\n                    }, 1); \r\n                  }\r\n                }\r\n              }\r\n            }\r\n          });\r\n        }\r\n\r\n        // Configure what is happening when a region is clicked and when a point is clicked.\r\n\r\n        var pointGraphicTrue;\r\n        thisView.on(\"click\", function (event) {\r\n          //console.log(event)\r\n          thisView.hitTest(event).then(getGraphics).then(buildLayer);\r\n        });\r\n\r\n        function getGraphics(response) {\r\n          // On vérifie s'il y a déjà une couche des stations d'affichée\r\n          var foundLayers = map.allLayers.find(function (layer) {\r\n            return layer.name === \"stationsLayerTrue\";\r\n          });\r\n\r\n          //Si on clique sur un couche de type polygone\r\n          if (response.results[0].graphic.geometry) {\r\n            if (response.results[0].graphic.geometry.type === \"polygon\") {\r\n              var geometry = response.results[0].graphic.geometry;\r\n              //console.log(geometry);\r\n\r\n              if (foundLayers) {\r\n                map.remove(foundLayers);\r\n              }\r\n\r\n              thisView.goTo(response.results[0].graphic.geometry);\r\n              console.log(\r\n                \"id\",\r\n                response.results[0].graphic.attributes.OBJECTID\r\n              );\r\n              getMeteo(response.results[0].graphic.attributes.OBJECTID);\r\n\r\n              return geometry;\r\n            } else {\r\n              // s'il y a une géométrie mais que c'est pas un polygone, c'est que j'ai cliqué sur une station\r\n              var stationAttributes = response.results[0].graphic.attributes;\r\n\r\n              getStationAttributes(date, stationAttributes);\r\n            }\r\n          } else {\r\n            foundLayers = map.allLayers.find(function (layer) {\r\n              return layer.name === \"stationsLayerTrue\";\r\n            });\r\n            if (foundLayers) {\r\n              map.remove(foundLayers);\r\n            }\r\n            return null;\r\n          }\r\n        }\r\n\r\n        function buildLayer(polygoneClique) {\r\n          //console.log(\"poly\", polygoneClique)\r\n          if (polygoneClique) {\r\n            // On crée une couche qui va contenir les stations\r\n            var stationsLayerTrue = new GraphicsLayer({\r\n              visible: true,\r\n              title: \"Stations\",\r\n              name: \"stationsLayerTrue\",\r\n              infoLegendeTitre: \"Légende\",\r\n              //listMode: \"hide\",\r\n            });\r\n            map.add(stationsLayerTrue);\r\n\r\n            for (let i = 0; i < stations.length; i++) {\r\n              var point = new Point({\r\n                longitude: stations[i][\"longitude\"],\r\n                latitude: stations[i][\"latitude\"],\r\n                spatialReference: { wkid: 3857 },\r\n              });\r\n\r\n              var intersects = polygoneClique.contains(point);\r\n\r\n              if (intersects) {\r\n                // check if wlo (observation) is available for station.\r\n                var color = null;\r\n                for (let j = 0; j < stations[i][\"timeSeries\"].length; j++) {\r\n                  if (stations[i][\"timeSeries\"][j][\"code\"] === \"wlo\") {\r\n                    color = \"wlo\";\r\n                  }\r\n                }\r\n\r\n                if (color === \"wlo\") {\r\n                  pointGraphicTrue = new Graphic({\r\n                    geometry: point,\r\n                    symbol: {\r\n                      type: \"simple-marker\",\r\n                      color: \"#d7191c\", //red\r\n                    },\r\n                    popupTemplate: popupTemplateWlo,\r\n                    attributes: {\r\n                      id: stations[i][\"id\"],\r\n                      officialName: stations[i][\"officialName\"],\r\n                      timeSeries: stations[i][\"timeSeries\"],\r\n                      color: color,\r\n                      lastDate: [],\r\n                      lastWlo: [],\r\n                      lastDateWlp: [],\r\n                      lastWlp: [],\r\n                      predictions: {},\r\n                      timeNow: [],\r\n                    },\r\n                  });\r\n                } else {\r\n                  pointGraphicTrue = new Graphic({\r\n                    geometry: point,\r\n                    symbol: {\r\n                      type: \"simple-marker\",\r\n                      color: \"#1a9641\", //green\r\n                    },\r\n                    popupTemplate: popupTemplate,\r\n                    attributes: {\r\n                      id: stations[i][\"id\"],\r\n                      officialName: stations[i][\"officialName\"],\r\n                      timeSeries: stations[i][\"timeSeries\"],\r\n                      color: color,\r\n                      lastDateWlp: [],\r\n                      lastWlp: [],\r\n                      predictions: {},\r\n                      timeNow: [],\r\n                    },\r\n                  });\r\n                  //console.log(pointGraphicTrue.attributes.timeSeries)\r\n                }\r\n\r\n                stationsLayerTrue.add(pointGraphicTrue);\r\n              }\r\n\r\n              layerList.listItemCreatedFunction = function (event) {\r\n                var item = event.item;\r\n                if (item.title === \"Stations\") {\r\n                  item.panel = {\r\n                    content:\"<p>Stations rouges: observations et prévisions</p><p>Stations vertes: observations seulement\",\r\n                    open: true}\r\n                }\r\n              };\r\n            }\r\n          }\r\n          //console.log(\"layer\", stationsLayerTrue);\r\n        }\r\n\r\n        // Call the function graph to create the graph popup template\r\n        let customContent = new CustomContent({\r\n          outFields: [\"*\"],\r\n          creator: function (feature) {\r\n            var div = document.createElement(\"div\");\r\n            var dataPrediction = feature.graphic.attributes.predictions;\r\n\r\n            div.innerHTML = \"Prédictions <br>\";\r\n\r\n            var data = dataPrediction;\r\n\r\n            //call fonction graph qui génère le graph d3js\r\n            graph(data, div, feature.graphic.attributes.timeNow, timeSlider);\r\n            return div;\r\n          },\r\n        });\r\n\r\n        //popup template for stations with observations and predictions\r\n        var popupTemplateWlo = {\r\n          title: \"{officialName}\",\r\n          content: [\r\n            {\r\n              // Pass in the fields to display\r\n              type: \"fields\",\r\n              fieldInfos: [\r\n                {\r\n                  fieldName: \"lastDate\",\r\n                  label: \"Dernière date d'observation\",\r\n                  format: {\r\n                    places: 0,\r\n                    digitSeparator: true,\r\n                  },\r\n                },\r\n                {\r\n                  fieldName: \"lastWlo\",\r\n                  label: \"Valeur\",\r\n                },\r\n              ],\r\n            },\r\n            customContent,\r\n          ],\r\n        };\r\n\r\n        //popup template for stations with  predictions only\r\n        var popupTemplate = {\r\n          title: \"{officialName}\",\r\n          content: [\r\n            {\r\n              // Pass in the fields to display\r\n              type: \"fields\",\r\n              fieldInfos: [\r\n                {\r\n                  fieldName: \"lastDateWlp\",\r\n                  label: \"Dernier moment de prédiction\",\r\n                  format: {\r\n                    places: 0,\r\n                    digitSeparator: true,\r\n                  },\r\n                },\r\n              ],\r\n            },\r\n            customContent,\r\n          ],\r\n        };\r\n\r\n        //builds the layerlist and the legends embedded in it\r\n        const layerList = new LayerList({\r\n          view: this.view,\r\n          container: document.createElement(\"div\"),\r\n        });\r\n        layerList.container.style = \"height: 100%\";\r\n        let panelDiv = document.getElementById(\"layerlist\");\r\n        panelDiv.appendChild(layerList.container);\r\n\r\n        //Fonction permettant entre autre de mentionner quand, à une date choisie, il n'y a pas de couches pour le groupe s'il est visible.\r\n        function updateGroupLayerList(title) {\r\n          layerList.listItemCreatedFunction = function (event) {\r\n            var item = event.item;\r\n            if (item.title === title) {\r\n              if (item.children.items.length === 0) {\r\n                item.panel = {\r\n                  content: \"Aucune couche pour le temps sélectionné\",\r\n                  open: true,\r\n                };\r\n              } else {\r\n                item.panel = { content: \"\" };\r\n              }\r\n            }\r\n            if (\"infoLegende\" in item.layer) {\r\n              item.panel = {\r\n                content: item.layer.infoLegende,\r\n                open: false,\r\n              };\r\n            }\r\n          };\r\n        }\r\n\r\n        //TimeSlider\r\n        var timeSlider = new TimeSlider({\r\n          container: document.getElementById(\"slider\"),\r\n          view: this.view,\r\n          // show data within a given time range\r\n          // in this case data within one year\r\n          mode: \"instant\",\r\n          fullTimeExtent: {\r\n            // entire extent of the timeSlider\r\n            start: date.datesArrayHours[0],\r\n            end: date.datesArrayHours[date.datesArrayHours.length - 1],\r\n          },\r\n          values: [\r\n            // location of timeSlider thumbs\r\n            date.dateNow,\r\n          ],\r\n          stops: {\r\n            interval: {\r\n              value: 20,\r\n              unit: \"minutes\",\r\n            },\r\n          },\r\n          tickConfigs: [\r\n            {\r\n              mode: \"count\",\r\n              values: 7,\r\n              labelsVisible: true,\r\n              labelFormatFunction: (value) => {\r\n                const date = new Date(value);\r\n                return `${date.getHours()}:${date.getUTCMinutes()}0`;\r\n              },\r\n            },\r\n          ],\r\n          layout: \"compact\",\r\n        });\r\n\r\n        thisView.ui.add(timeSlider, \"manual\");\r\n        timeSlider.watch(\"values\", function (values) {\r\n          timeChangeProxy.dateChosen = values[0];\r\n        });\r\n        // TODO Check why I cannot CSS the common parent tag of titleDate and Slider. If I dont CSS directly the slider tag, it doesnt appear at the right place.\r\n        document.getElementById(\"titleDate\").innerHTML = date.dateNow;\r\n      }\r\n    );\r\n  },\r\n  beforeDestroy() {\r\n    if (this.view) {\r\n      // destroy the map view\r\n      this.view.destroy();\r\n    }\r\n  },\r\n};\r\n</script>\r\n\r\n<style>\r\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./WebMap.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./WebMap.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./WebMap.vue?vue&type=template&id=c681a0c8&\"\nimport script from \"./WebMap.vue?vue&type=script&lang=js&\"\nexport * from \"./WebMap.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\n  <div id=\"app\">\n    <web-map id=\"viewDiv\" />\n    <div id=\"layerlist\"></div>\n    <div id=\"panel\">\n      <div id=\"region\">\n        Prévisions météo maritime - veuillez cliquer sur une région\n      </div>\n      <div id=\"emis\"></div>\n\n      <table id=\"headerVent\"></table>\n      <div id=\"vent\"></div>\n      <table id=\"headerVagues\"></table>\n      <div id=\"vagues\"></div>\n      <table id=\"headerConditions\"></table>\n      <div id=\"conditions\"></div>\n\n      <table id=\"longTerme\"></table>\n      <div id=\"emisExtent\"></div>\n    </div>\n    <div id=\"sliderContainer\">\n      <div id=\"titleDate\"></div>\n      <div id=\"slider\"></div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport WebMap from \"./components/WebMap.vue\";\nexport default {\n  name: \"App\",\n  components: { WebMap },\n};\n</script>\n\n<style lang=\"scss\">\n@import \"src/assets/css/style_test_navigation_meteo.scss\";\n</style>\n","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=5adcfaf2&\"\nimport script from \"./App.vue?vue&type=script&lang=js&\"\nexport * from \"./App.vue?vue&type=script&lang=js&\"\nimport style0 from \"./App.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import Vue from 'vue'\r\nimport App from './App.vue'\r\n//import router from './router'\r\n\r\nVue.config.productionTip = false,\r\n    Vue.prototype.a = '123';\r\n\r\n\r\nconst errors = Vue.observable({ errors: {} })\r\n\r\nObject.defineProperty(Vue.prototype, '$errors', {\r\n    get() {\r\n        return errors.errors\r\n    },\r\n\r\n    set(value) {\r\n        errors.errors = value\r\n    }\r\n})\r\n\r\n\r\nnew Vue({\r\n    //router,\r\n    render: h => h(App),\r\n    watch: {\r\n        $errors() {\r\n            console.log('$errors has changed')\r\n        }\r\n    }\r\n}).$mount('#app')","export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=scss&\""],"sourceRoot":""}